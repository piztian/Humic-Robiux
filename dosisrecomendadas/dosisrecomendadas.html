<!-- ================================
  HUMIC SOLUTIONS · Dosis y Frecuencias
  Bloque HTML autointegrable (Bitrix24 Sites)
  Autor: Humic Solutions
  Notas:
  - No requiere librerías externas.
  - 100% adaptable a móvil.
  - Incluye botón dinámico para descargar Ficha Técnica (PDF).
=================================== -->
<section id="dosis-humic" style="padding:32px 16px;background:#f9fafb;font-family:'Segoe UI',system-ui,Arial,sans-serif;color:#1f2937">
  <!-- Encabezado -->
  <div style="max-width:1100px;margin:0 auto;text-align:center">
    <h1 style="margin:0 0 6px 0;color:#56B24C;font-size:28px;letter-spacing:0.2px">Dosis y Frecuencias Recomendadas</h1>
    <p style="margin:0 0 18px 0;color:#4b5563;font-size:15px">
      Selecciona tu cultivo para consultar las dosis sugeridas de <b>Humic Q Max</b>.
    </p>

    <!-- Selector de cultivo -->
    <div style="margin-bottom:18px">
      <label for="cultivoSelect" style="display:block;margin-bottom:8px;color:#374151;font-weight:600">
        Cultivo
      </label>
      <select id="cultivoSelect" onchange="HS_mostrarCultivo()"
              style="padding:10px 12px;border-radius:10px;border:1px solid #d1d5db;background:#fff;min-width:260px;font-size:15px">
        <option value="">-- Selecciona un cultivo --</option>
        <option value="caña">Caña de Azúcar</option>
        <option value="maiz">Maíz</option>
        <option value="leguminosas">Leguminosas</option>
        <option value="aguacate">Aguacate</option>
        <option value="berries">Berries</option>
        <option value="jitomate">Jitomate</option>
        <option value="chile">Chile Morrón</option>
      </select>
    </div>

    <!-- Tabla responsive -->
    <div style="overflow:auto">
      <table id="tablaDosis" style="display:none;width:100%;max-width:1000px;margin:0 auto;border-collapse:collapse;background:#ffffff;border-radius:14px;overflow:hidden;box-shadow:0 8px 24px rgba(0,0,0,0.08)">
        <thead>
          <tr style="background:#56B24C;color:#ffffff">
            <th style="padding:12px 10px;text-align:left">Etapa de Aplicación</th>
            <th style="padding:12px 10px;text-align:center">Fertirriego<br>(L/ha)</th>
            <th style="padding:12px 10px;text-align:center">Drench<br>(L/100 L agua)</th>
            <th style="padding:12px 10px;text-align:center">Dron<br>(L/10 L agua)</th>
            <th style="padding:12px 10px;text-align:center">Frecuencia</th>
            <th style="padding:12px 10px;text-align:center">UFC/mL Aprox.</th>
          </tr>
        </thead>
        <tbody id="tablaBody">
          <!-- Filas dinámicas -->
        </tbody>
      </table>
    </div>

    <!-- Botón descarga Ficha Técnica (se muestra al elegir cultivo) -->
    <div id="ctaFicha" style="display:none;margin:18px 0 6px 0">
      <a id="linkFicha" href="#" target="_blank" rel="noopener"
         style="display:inline-block;background:#0ea5e9;color:#ffffff;text-decoration:none;font-weight:700;border-radius:12px;padding:12px 18px">
        Descargar Ficha Técnica (PDF)
      </a>
    </div>

    <!-- Nota de referencia de unidades -->
    <p style="margin:8px 0 0 0;color:#6b7280;font-size:12.5px">
      * Las dosis pueden ajustarse según condición del suelo, etapa fenológica y objetivo del productor.
    </p>
  </div>
</section>

<script>
/* ==========================================
   Datos maestros · Dosis por cultivo
   Formato de cada fila:
   [ Etapa, Fertirriego(L/ha), Drench(L/100L), Dron(L/10L), Frecuencia, UFC/mL Aprox. ]
========================================== */
const HS_datos = {
  "caña": [
    ["Brotación", 12, 1.2, 1, "Cada 30 días", "1.20E+09"],
    ["Crecimiento activo", 18, 1.8, 1.5, "Cada 30 días", "1.80E+09"],
    ["Maduración", 12, 1.2, 1, "Cada 45 días", "1.20E+09"]
  ],
  "maiz": [
    ["Emergencia", 10, 1, 1, "Única aplicación inicial", "1.00E+10"],
    ["Vegetativo", 15, 1.5, 1.3, "Cada 20 días", "1.50E+09"],
    ["Floración", 12, 1.2, 1, "Única aplicación inicial", "1.20E+09"]
  ],
  "leguminosas": [
    ["Siembra y establecimiento", 8, 0.8, 0.8, "Única aplicación inicial", "8.00E+08"],
    ["Crecimiento vegetativo", 12, 1.2, 1, "Cada 25 días", "1.20E+09"],
    ["Floración y llenado", 14, 1.4, 1.2, "Cada 20 días", "1.40E+09"]
  ],
  "aguacate": [
    ["Floración", 15, 1.5, 1.5, "Cada 30 días", "1.50E+09"],
    ["Desarrollo de frutos", 20, 2, 1.8, "Cada 30 días", "2.00E+09"]
  ],
  "berries": [
    ["Establecimiento inicial", 10, 1, 1, "Cada 20 días", "1.00E+09"],
    ["Floración y cuajado", 14, 1.4, 1.2, "Cada 15–20 días", "1.40E+09"],
    ["Desarrollo del fruto", 12, 1.2, 1, "Cada 20 días", "1.20E+09"]
  ],
  "jitomate": [
    ["Siembra y establecimiento", 10, 1, 1, "Única aplicación inicial", "1.00E+09"],
    ["Crecimiento vegetativo", 15, 1.5, 1.2, "Cada 15 días", "1.50E+09"],
    ["Floración y fructificación", 18, 1.8, 1.5, "Cada 15 días", "1.80E+09"]
  ],
  "chile": [
    ["Siembra y establecimiento", 10, 1, 1, "Única aplicación inicial", "1.00E+09"],
    ["Crecimiento vegetativo", 14, 1.4, 1.2, "Cada 15 días", "1.40E+09"],
    ["Floración y fructificación", 16, 1.6, 1.4, "Cada 15 días", "1.60E+09"]
  ]
};

/* ==========================================
   Enlaces a Fichas Técnicas por cultivo
   (aquí puedes personalizar por cultivo; por defecto usa la general)
========================================== */
const HS_pdfPorCultivo = {
  "default": "https://raw.githubusercontent.com/piztian/Humic-Robiux/main/fichastecnicas/Ficha%20Tecnica%202025%20-%20HumicQ%20Max.pdf",
  "caña":     "https://raw.githubusercontent.com/piztian/Humic-Robiux/main/fichastecnicas/Ficha%20Tecnica%202025%20-%20HumicQ%20Max.pdf",
  "maiz":     "https://raw.githubusercontent.com/piztian/Humic-Robiux/main/fichastecnicas/Ficha%20Tecnica%202025%20-%20HumicQ%20Max.pdf",
  "leguminosas":"https://raw.githubusercontent.com/piztian/Humic-Robiux/main/fichastecnicas/Ficha%20Tecnica%202025%20-%20HumicQ%20Max.pdf",
  "aguacate": "https://raw.githubusercontent.com/piztian/Humic-Robiux/main/fichastecnicas/Ficha%20Tecnica%202025%20-%20HumicQ%20Max.pdf",
  "berries":  "https://raw.githubusercontent.com/piztian/Humic-Robiux/main/fichastecnicas/Ficha%20Tecnica%202025%20-%20HumicQ%20Max.pdf",
  "jitomate": "https://raw.githubusercontent.com/piztian/Humic-Robiux/main/fichastecnicas/Ficha%20Tecnica%202025%20-%20HumicQ%20Max.pdf",
  "chile":    "https://raw.githubusercontent.com/piztian/Humic-Robiux/main/fichastecnicas/Ficha%20Tecnica%202025%20-%20HumicQ%20Max.pdf"
};

/* ==========================================
   Render dinámico de la tabla + botón PDF
========================================== */
function HS_mostrarCultivo(){
  const sel   = document.getElementById("cultivoSelect");
  const key   = sel.value;
  const tabla = document.getElementById("tablaDosis");
  const body  = document.getElementById("tablaBody");
  const cta   = document.getElementById("ctaFicha");
  const link  = document.getElementById("linkFicha");

  // Limpieza de filas previas
  body.innerHTML = "";

  if (key && HS_datos[key]){
    // Pintar filas
    HS_datos[key].forEach(fila=>{
      const tr = document.createElement("tr");
      fila.forEach((dato,idx)=>{
        const td = document.createElement("td");
        td.style.padding   = "10px 8px";
        td.style.fontSize  = "14px";
        td.style.borderBottom = "1px solid #eef2f7";
        // Alineaciones por columna
        td.style.textAlign = (idx === 0 ? "left" : "center");
        td.textContent = dato;
        tr.appendChild(td);
      });
      body.appendChild(tr);
    });

    // Mostrar tabla
    tabla.style.display = "table";

    // Activar botón de Ficha Técnica (por cultivo o default)
    const urlPDF = HS_pdfPorCultivo[key] || HS_pdfPorCultivo["default"];
    link.href = urlPDF;
    cta.style.display = "block";
  } else {
    // Ocultar si no hay selección
    tabla.style.display = "none";
    cta.style.display   = "none";
  }
}
</script>
